%%%%%%%%%%%%%%%% Given matrices %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %Mass Matrix (Rigid body + Added mass):
M = [   7*10^6  0           0;
        0       11*10^6     0;
        0       0           3*10^9;];
M_inverse = inv(M);

%Damping matrix
D = [   1.7*10^5    0               0;
        0           1.4*10^5        0;
        0           0               6.4*10^7;
    ]/10;

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%% Other %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Number of forces u is divided into -> 3DOF -> Bu = I_3x3
pN = 3;

% Step Length
h=0.1; %0.1
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%% Design Parameters %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
R = diag([0.115,0.0120,0.0004]);  
Q = 10^11*diag([1,1,100]);

x0= [0,0,0,1,1,1,0,0,0]';
P0 = 10^8*diag([0,0,0,1,1,1,0,0,0]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%% State Matrices %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% f is calculated as an in the simulink implementation

B = [   zeros(3,pN); 
        zeros(3,pN); 
        M_inverse; ];
    
E = [   zeros(3); 
        eye(3);
        zeros(3); ];

H = [   eye(3)    zeros(3,6); ];    


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    

save('ExtendedKalmanFilter.mat')





